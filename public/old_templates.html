<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Old Templates Archive</title>
    <style>
    :root {
        --background-color: #f0f2f5;
        --card-color: #ffffff;
        --text-color: #333333;
        --secondary-text-color: #666666;
        --border-color: #ccc;
        --header-bg-color: #ffffff;
        --button-primary-bg: #42b72a;
        --button-secondary-bg: #3498db;
    }

    body.dark-theme {
        --background-color: #121212;
        --card-color: #1e1e1e;
        --text-color: #e0e0e0;
        --secondary-text-color: #a0a0a0;
        --border-color: #444;
        --header-bg-color: #1e1e1e;
        --button-primary-bg: #27ae60;
        --button-secondary-bg: #2980b9;
    }

    body { 
        font-family: Arial, sans-serif; 
        margin: 0; 
        background-color: var(--background-color); 
        color: var(--text-color);
        transition: background-color 0.3s, color 0.3s;
    }
    .container { max-width: 1200px; margin: 20px auto; padding: 0 20px; }
    header { 
        background-color: var(--header-bg-color); 
        padding: 20px; 
        text-align: center; 
        box-shadow: 0 2px 4px rgba(0,0,0,.1); 
        position: relative; 
    }
    .header-controls { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; }
    .theme-btn { font-size: 1.5rem; background: none; border: none; cursor: pointer; color: var(--text-color); }
    .language-switcher button { padding: 5px 10px; margin-left: 5px; border: 1px solid var(--border-color); background-color: transparent; cursor: pointer; color: var(--text-color); }
    .language-switcher button.active { background-color: var(--button-secondary-bg); color: white; }
    
    .template-builder { background: var(--card-color); padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,.1); margin: 40px 0; }
    .form-group input, .form-group textarea { width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; box-sizing: border-box; background-color: var(--background-color); color: var(--text-color); }
    .cta-button { background-color: var(--button-primary-bg); }
    .template-card { background: var(--card-color); }
    
    /* ... Ø¢Ù¾ Ú©Û’ Ø¨Ø§Ù‚ÛŒ Ø§Ø³Ù¹Ø§Ø¦Ù„Ø² ... */
    /* ... The rest of your styles ... */
    
</style>

</head>
<body>

    <main class="container">
        <div class="template-gallery">
            <h2>Old Templates</h2>
            <div class="gallery-grid"></div>
        </div>
    </main>
    <header>
        <div class="header-controls">
    <div class="language-switcher">
        <button data-lang="en">English</button>
        <button data-lang="ur">Ø§Ø±Ø¯Ùˆ</button>
        <button data-lang="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
    </div>
    <button id="theme-switcher" class="theme-btn">ðŸŒ™</button>
</div>

    </header>

    <div id="image-modal" class="modal">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <img id="modal-image" src="" alt="Modal Image">
        <h3 id="modal-title"></h3>
        <p id="modal-text"></p>
      </div>
    </div>

    <script>
        // --- Ø¶Ø±ÙˆØ±ÛŒ Ø¹Ù†Ø§ØµØ± Ø§ÙˆØ± Ù…ØªØºÛŒØ±Ø§Øª ---
        const galleryGrid = document.querySelector('.gallery-grid');
        const modal = document.getElementById('image-modal');
        const modalImage = document.getElementById('modal-image');
        const modalTitle = document.getElementById('modal-title');
        const modalText = document.getElementById('modal-text');
        const closeButton = document.querySelector('.close-button');
        const API_URL = 'https://my-template-builder-1.onrender.com';

        let originalTemplates = []; // Ø§ØµÙ„ ÚˆÛŒÙ¹Ø§ ÛŒÛØ§Úº Ù…Ø­ÙÙˆØ¸ ÛÙˆÚ¯Ø§

        // --- ÙÙ†Ú©Ø´Ù†: Ù¾Ø±Ø§Ù†ÛŒ Ù¹ÛŒÙ…Ù¾Ù„ÛŒÙ¹Ø³ Ø¯Ú©Ú¾Ø§Ù†Ø§ ---
        async function fetchAndDisplayTemplates() {
            try {
                const response = await fetch(`${API_URL}/api/templates`);
                originalTemplates = await response.json();
                const oldTemplates = originalTemplates.slice(1); // Ù¾ÛÙ„ÛŒ Ù¹ÛŒÙ…Ù¾Ù„ÛŒÙ¹ Ú©Ùˆ Ú†Ú¾ÙˆÚ‘ Ú©Ø± Ø¨Ø§Ù‚ÛŒ Ø³Ø¨
                
                galleryGrid.innerHTML = '';

                oldTemplates.forEach((template, index) => {
                    const card = document.createElement('div');
                    card.className = 'template-card';
                    card.dataset.id = template._id; // Ú©Ø§Ø±Úˆ Ú©Ùˆ Ù¹ÛŒÙ…Ù¾Ù„ÛŒÙ¹ Ú©ÛŒ Ø§ØµÙ„ ID Ø¯ÛŒÚº
                    
                    card.innerHTML = `
                        <img src="${template.imageUrl}" alt="${template.title}">
                        <div class="card-actions">
                            <a href="${template.imageUrl}" class="download-btn" download>Download</a>
                            <button class="delete-btn" data-id="${template._id}">Delete</button>
                        </div>`;
                    galleryGrid.appendChild(card);
                });
            } catch (error) {
                console.error('Ù¹ÛŒÙ…Ù¾Ù„ÛŒÙ¹Ø³ Ù„ÙˆÚˆ Ú©Ø±Ù†Û’ Ù…ÛŒÚº Ù†Ø§Ú©Ø§Ù…ÛŒ:', error);
            }
        }

        // --- Ø§ÛŒÙˆÙ†Ù¹ ÛÛŒÙ†ÚˆÙ„Ø±Ø² ---
        galleryGrid.addEventListener('click', async function(event) {
            const card = event.target.closest('.template-card');

            if (event.target.classList.contains('delete-btn')) {
                event.stopPropagation();
                const id = event.target.dataset.id;
                if (confirm('Ú©ÛŒØ§ Ø¢Ù¾ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø³ Ù¹ÛŒÙ…Ù¾Ù„ÛŒÙ¹ Ú©Ùˆ ÚˆÛŒÙ„ÛŒÙ¹ Ú©Ø±Ù†Ø§ Ú†Ø§ÛØªÛ’ ÛÛŒÚºØŸ')) {
                    try {
                        const response = await fetch(`${API_URL}/api/templates/${id}`, { method: 'DELETE' });
                        if (!response.ok) throw new Error('ÚˆÛŒÙ„ÛŒÙ¹ Ú©Ø±Ù†Û’ Ù…ÛŒÚº Ù†Ø§Ú©Ø§Ù…ÛŒ');
                        await fetchAndDisplayTemplates();
                    } catch (error) {
                        alert('Ù†Ø§Ú©Ø§Ù…ÛŒ: ' + error.message);
                    }
                }
            } else if (card) {
                const id = card.dataset.id;
                const template = originalTemplates.find(t => t._id === id); // ID Ú©ÛŒ Ø¨Ù†ÛŒØ§Ø¯ Ù¾Ø± Ù¹ÛŒÙ…Ù¾Ù„ÛŒÙ¹ ØªÙ„Ø§Ø´ Ú©Ø±ÛŒÚº
                
                if (template) {
                    modalImage.src = template.imageUrl;
                    modalTitle.textContent = template.title;
                    modalText.textContent = template.text || '';
                    modal.style.display = 'block';
                }
            }
        });
        
        // Ù…ÙˆÚˆÙ„ Ú©Ùˆ Ø¨Ù†Ø¯ Ú©Ø±Ù†Ø§
        closeButton.addEventListener('click', function() {
            modal.style.display = 'none';
        });
        window.addEventListener('click', function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        });

        // ØªÚ¾ÛŒÙ… Ø³ÙˆØ¦Ú†Ø± Ú©Ø§ Ú©ÙˆÚˆ
const themeSwitcher = document.getElementById('theme-switcher');

// ÙÙ†Ú©Ø´Ù†: ØªÚ¾ÛŒÙ… Ø³ÛŒÙ¹ Ú©Ø±Ù†Ø§
const setTheme = (theme) => {
    if (theme === 'dark') {
        document.body.classList.add('dark-theme');
        themeSwitcher.textContent = 'â˜€ï¸'; // Ø³ÙˆØ±Ø¬ Ú©Ø§ Ø¢Ø¦ÛŒÚ©Ù†
    } else {
        document.body.classList.remove('dark-theme');
        themeSwitcher.textContent = 'ðŸŒ™'; // Ú†Ø§Ù†Ø¯ Ú©Ø§ Ø¢Ø¦ÛŒÚ©Ù†
    }
    localStorage.setItem('theme', theme);
};

// Ø¨Ù¹Ù† Ù¾Ø± Ú©Ù„Ú© Ú©Ø§ Ø§ÛŒÙˆÙ†Ù¹
themeSwitcher.addEventListener('click', () => {
    const currentTheme = localStorage.getItem('theme') || 'light';
    if (currentTheme === 'light') {
        setTheme('dark');
    } else {
        setTheme('light');
    }
});

// ØµÙØ­Û Ù„ÙˆÚˆ ÛÙˆØªÛ’ ÛÛŒ Ù…Ø­ÙÙˆØ¸ Ø´Ø¯Û ØªÚ¾ÛŒÙ… Ú©Ùˆ Ù„Ø§Ú¯Ùˆ Ú©Ø±ÛŒÚº
document.addEventListener('DOMContentLoaded', () => {
    const savedTheme = localStorage.getItem('theme') || 'light';
    setTheme(savedTheme);
    // ... Ø¢Ù¾ Ú©Ø§ Ø¨Ø§Ù‚ÛŒ DOMContentLoaded Ú©Ø§ Ú©ÙˆÚˆ ...
});

    </script>

</body>
</html>
